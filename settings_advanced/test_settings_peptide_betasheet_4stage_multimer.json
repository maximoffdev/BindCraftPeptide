{
    "_comment_header": "=== BindCraft Advanced Settings ===",
    "_comment_position_control": "POSITION CONTROL HIERARCHY (binder_advanced protocol): Four levels with strict priority (fixed > template > sequence > redesign). Each position belongs to exactly ONE level. Level 1 (Fixed): Keep sequence AND structure - use for catalytic sites, disulfides. Level 2 (Template): Keep structure, redesign sequence - use for preserving secondary structure geometry. Level 3 (Sequence): Keep sequence, allow movement - use for binding motifs that need spatial optimization. Level 4 (Redesign): Full freedom - default for unspecified positions.",
    "_comment_floating_modes": "FLOATING MODES: floating=false (anchored): Disulfides added to fixed_residues (Level 1, keeps seq+struct). Use template_positions for Level 2. floating=true (mobile): Disulfides added to sequence control (Level 3, keeps seq, allows movement). Use for optimizing spatial arrangement while preserving key sequences.",
    
    "_comment_section_1": "=== Sequence Design Constraints ===",
    "omit_AAs": "C",
    "_comment_omit_AAs": "Amino acids to exclude during design (e.g., 'C' to avoid cysteines). Used by af_model.prep_inputs and MPNN",
    "force_reject_AA": false,
    "_comment_force_reject_AA": "If true, strictly reject MPNN sequences containing omitted amino acids",
    "use_disulfide_loss": false,
    "_comment_use_disulfide_loss": "If true, use disulfide bond loss during design",
    "disulfide_pairs": [],
    "_comment_disulfide_pairs": "List of cysteine residue index pairs to form disulfide bonds (0-based, binder only). Example: [[0, 9], [3, -1]] creates bonds between positions 0-9 and 3-last. Empty list = auto-generate pairs. Use -1 for second position to automatically select the last residue of the binder.",
    "disulfide_num": 1,
    "_comment_disulfide_num": "Number of disulfide bonds to promote during design",
    "disulfide_min_sep": 5,
    "_comment_disulfide_min_sep": "Minimum sequence separation between cysteines (to avoid adjacent residues)",

    "_comment_section_1b": "=== Advanced Position Control (binder_advanced protocol only) ===",
    "floating": true,
    "_comment_floating": "Floating mode: false = binder position anchored in space (redesign sequence at fixed positions), true = binder can move (redesign structure, preserve sequence at fixed positions). Controls how disulfide pairs are treated.",
    "fixed_residues": "1,3,4",
    "_comment_fixed_residues": "Comma-separated positions (1-based) for fixed control. If floating=false: keeps sequence AND structure (e.g., '1,2,5-8'). If floating=true: keeps sequence, allows movement (e.g., '1,2,5-8'). Disulfide pairs are automatically added here.",
    "template_positions": "6",
    "_comment_template_positions": "Comma-separated positions (1-based) to keep structure but redesign sequence (e.g., '10-20' preserves helix geometry). Only used when floating=false. Useful for maintaining secondary structure elements.",
    "_comment_examples": "EXAMPLES: (1) Anchored redesign with helix preservation: floating=false, fixed_residues='1,2' (CYS-CYS), template_positions='10-25' (helix), rest redesigned. (2) Floating optimization with motif: floating=true, fixed_residues='15-17' (HPQ motif), structure and other positions redesigned. (3) Beta-sheet scaffold: floating=false, template_positions='5-12,20-27' (beta strands), sequence optimized.",

    "_comment_section_2": "=== AlphaFold Model Settings ===",
    "use_multimer_design": true,
    "_comment_use_multimer_design": "Use AlphaFold-Multimer for binder hallucination (vs monomer mode)",
    "design_algorithm": "4stage",
    "_comment_design_algorithm": "Design algorithm: '2stage', '3stage', '4stage', 'greedy', or 'mcmc'. 4stage includes quality checkpoints",
    "sample_models": true,
    "_comment_sample_models": "Randomly sample different AF2 model weights during design for diversity",
    "rm_template_seq_design": false,
    "_comment_rm_template_seq_design": "Remove target sequence from template during binder design (forces de novo design)",
    "rm_template_seq_predict": false,
    "_comment_rm_template_seq_predict": "Remove target sequence from template during MPNN validation predictions",
    "rm_template_sc_design": false,
    "_comment_rm_template_sc_design": "Remove target side-chains from template during design (keeps backbone only)",
    "rm_template_sc_predict": false,
    "_comment_rm_template_sc_predict": "Remove target side-chains from template during validation predictions",
    "predict_initial_guess": false,
    "_comment_predict_initial_guess": "Use trajectory structure as initial guess template for MPNN validation",
    "predict_bigbang": false,
    "_comment_predict_bigbang": "Use initial atom positions (bigbang protocol) for MPNN validation",

    "_comment_section_3": "=== Quality Thresholds Design ===",
    "initial_plddt": 0.20,
    "_comment_initial": "Min average binder pLDDT after initial logits stage to continue (4stage only)",
    "softmax_plddt": 0.20,
    "_comment_softmax": "Min average binder pLDDT after softmax stage to continue (4stage only)",
    "onehot_plddt": 0.20,
    "_comment_onehot": "Min average binder pLDDT after one-hot stage to continue (4stage only)",
    "final_plddt": 0.20,
    "_comment_final": "Min average binder pLDDT of final trajectory to proceed with MPNN optimization",
    "final_iptm": 0.05,
    "_comment_final_iptm": "Min interface predicted TM-score to accept trajectory (filters weak binders)",

    "_comment_section_4": "=== Design Iterations ===",
    "soft_iterations": 25,
    "_comment_soft_iterations": "Number of logits/PSSM gradient descent iterations (soft optimization), default 75",
    "temporary_iterations": 5,
    "_comment_temporary_iterations": "Number of softmax sampling iterations (temperature-based, 3stage/4stage), default 45",
    "hard_iterations": 5,
    "_comment_hard_iterations": "Number of one-hot discrete sequence iterations (3stage/4stage)",
    "greedy_iterations": 2,
    "_comment_greedy_iterations": "Number of greedy/semigreedy mutation iterations (2stage/greedy/mcmc)",
    "greedy_percentage": 1,
    "_comment_greedy_percentage": "Percentage of binder length to mutate per greedy iteration (tries = length * % / 100)",

    "_comment_section_5": "=== Output Settings ===",
    "save_design_animations": true,
    "_comment_save_design_animations": "Save HTML animations of trajectory design process",
    "save_design_trajectory_plots": true,
    "_comment_save_design_trajectory_plots": "Save loss/metrics plots for each trajectory",

    "_comment_section_6": "=== Loss Function Weights ===",
    "weights_plddt": 0.15,
    "_comment_weights_plddt": "Weight for predicted LDDT confidence loss (higher = favor high confidence)",
    "weights_pae_intra": 0.2,
    "_comment_weights_pae_intra": "Weight for intra-chain predicted aligned error loss (binder internal structure)",
    "weights_pae_inter": 0.3,
    "_comment_weights_pae_inter": "Weight for inter-chain PAE loss (binder-target interface confidence)",
    "weights_con_intra": 0.4,
    "_comment_weights_con_intra": "Weight for intra-chain contact loss (binder internal contacts)",
    "weights_con_inter": 0.5,
    "_comment_weights_con_inter": "Weight for inter-chain contact loss (binder-target interface contacts)",
    "intra_contact_distance": 14.0,
    "_comment_intra_contact_distance": "Distance cutoff (Å) for counting intra-chain contacts",
    "inter_contact_distance": 20.0,
    "_comment_inter_contact_distance": "Distance cutoff (Å) for counting interface contacts",
    "intra_contact_number": 2,
    "_comment_intra_contact_number": "Target number of intra-chain contacts per residue",
    "inter_contact_number": 2,
    "_comment_inter_contact_number": "Target number of interface contacts per residue",
    "weights_helicity": 0.0,
    "_comment_weights_helicity": "Weight for helicity loss (negative = penalize helices, positive = promote)",
    "random_helicity": false,
    "_comment_random_helicity": "Randomly sample helicity weight for each trajectory",

    "_comment_section_7": "=== Additional Loss Functions ===",
    "use_i_ptm_loss": true,
    "_comment_use_i_ptm_loss": "Include interface pTM (predicted template modeling score) in loss",
    "weights_iptm": 0.40,
    "_comment_weights_iptm": "Weight for interface pTM loss (higher = favor better interface alignment)",
    "use_rg_loss": false,
    "_comment_use_rg_loss": "Include radius of gyration loss (penalizes overly extended structures)",
    "weights_rg": 0.3,
    "_comment_weights_rg": "Weight for radius of gyration loss",
    "use_termini_distance_loss": false,
    "_comment_use_termini_distance_loss": "Penalize N-C termini distance above threshold (favor compact peptides)",
    "weights_termini_loss": 0.1,
    "_comment_weights_termini_loss": "Weight for termini distance loss",

    "_comment_section_8": "=== MPNN Sequence Optimization ===",
    "enable_mpnn": false,
    "_comment_enable_mpnn": "Use ProteinMPNN to generate alternative sequences for designed backbones",
    "mpnn_fix_interface": false,
    "_comment_mpnn_fix_interface": "Fix interface residues during MPNN redesign (only redesign non-interface positions)",
    "num_seqs": 20,
    "_comment_num_seqs": "Number of sequences to sample from MPNN per trajectory",
    "max_mpnn_sequences": 4,
    "_comment_max_mpnn_sequences": "Maximum number of accepted MPNN designs to save per trajectory",
    "sampling_temp": 0.5,
    "_comment_sampling_temp": "MPNN sampling temperature (lower = more conservative, higher = more diverse)",
    "backbone_noise": 0.10,
    "_comment_backbone_noise": "Backbone coordinate noise (Å) added before MPNN sampling",
    "model_path": "v_48_020",
    "_comment_model_path": "MPNN model version to use",
    "mpnn_weights": "soluble",
    "_comment_mpnn_weights": "MPNN weights type: 'soluble' or others (affects amino acid preferences)",
    "save_mpnn_fasta": true,
    "_comment_save_mpnn_fasta": "Save FASTA files for each MPNN sequence",

    "_comment_section_9": "=== Prediction/Validation Settings ===",
    "direct_trajectory_filtering": false,
    "_comment_direct_trajectory_filtering": "Directly filter original trajectory sequences",
    "pre_filter_trajectory": false,
    "_comment_pre_filter_trajectory": "Pre-filter trajectory sequences using provided filters JSON",
    "num_recycles_design": 3,
    "_comment_num_recycles_design": "Number of AF2 recycles during binder hallucination/design, default 1",
    "num_recycles_validation": 3,
    "_comment_num_recycles_validation": "Number of AF2 recycles during MPNN sequence validation predictions",
    "optimise_beta": true,
    "_comment_optimise_beta": "Increase recycles for beta-sheet-rich designs (detected if binder >15% beta)",
    "optimise_beta_extra_soft": 0,
    "_comment_optimise_beta_extra_soft": "Extra soft iterations for beta-sheet trajectories (4stage)",
    "optimise_beta_extra_temp": 0,
    "_comment_optimise_beta_extra_temp": "Extra temp iterations for beta-sheet trajectories (4stage)",
    "optimise_beta_recycles_design": 3,
    "_comment_optimise_beta_recycles_design": "Recycles during design if beta-sheet detected",
    "optimise_beta_recycles_valid": 3,
    "_comment_optimise_beta_recycles_valid": "Recycles during validation if beta-sheet detected",

    "_comment_section_10": "=== File Management ===",
    "remove_unrelaxed_trajectory": false,
    "_comment_remove_unrelaxed_trajectory": "Delete unrelaxed trajectory PDB after relaxation (save disk space)",
    "remove_unrelaxed_complex": false,
    "_comment_remove_unrelaxed_complex": "Delete unrelaxed MPNN complex PDBs after relaxation",
    "remove_binder_monomer": false,
    "_comment_remove_binder_monomer": "Delete binder-alone monomer predictions (keep only complexes)",
    "zip_animations": false,
    "_comment_zip_animations": "Compress HTML animation files to save space",
    "zip_plots": false,
    "_comment_zip_plots": "Compress trajectory plot files",
    "save_trajectory_pickle": false,
    "_comment_save_trajectory_pickle": "Save full trajectory data as pickle (large files, for debugging)",
    "max_trajectories": false,
    "_comment_max_trajectories": "Maximum number of trajectories to attempt (false = unlimited until target reached)",

    "_comment_section_11": "=== Quality Control ===",
    "enable_rejection_check": true,
    "_comment_enable_rejection_check": "Monitor acceptance rate and halt if too low (indicates poor settings)",
    "acceptance_rate": 0.01,
    "_comment_acceptance_rate": "Minimum acceptable ratio of successful designs to total trajectories",
    "start_monitoring": 600,
    "_comment_start_monitoring": "Number of trajectories before starting acceptance rate monitoring",

    "_comment_section_12": "=== External Tool Paths ===",
    "af_params_dir": "",
    "_comment_af_params_dir": "Path to AlphaFold parameters directory (empty = auto-detect)",
    "dssp_path": "",
    "_comment_dssp_path": "Path to DSSP executable for secondary structure analysis (empty = auto-detect)",
    "dalphaball_path": "",
    "_comment_dalphaball_path": "Path to DAlphaBall for cavity/surface analysis (empty = auto-detect)"
}
